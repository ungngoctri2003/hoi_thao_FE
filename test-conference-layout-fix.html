<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Conference Layout Fix</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .test-section { margin: 20px 0; padding: 15px; border: 1px solid #ccc; border-radius: 5px; }
        .success { color: green; }
        .error { color: red; }
        .info { color: blue; }
        .warning { color: orange; }
        button { padding: 10px 15px; margin: 5px; cursor: pointer; background: #007bff; color: white; border: none; border-radius: 3px; }
        button:hover { background: #0056b3; }
        .test-link { display: block; margin: 10px 0; padding: 10px; background: #f8f9fa; border: 1px solid #dee2e6; border-radius: 3px; text-decoration: none; color: #007bff; }
        .test-link:hover { background: #e9ecef; }
        .fix-summary { background: #d4edda; border: 1px solid #c3e6cb; padding: 15px; border-radius: 5px; margin: 20px 0; }
        .layout-issue { background: #f8d7da; border: 1px solid #f5c6cb; padding: 15px; border-radius: 5px; margin: 20px 0; }
    </style>
</head>
<body>
    <h1>🔧 Test Conference Layout Fix</h1>
    
    <div class="layout-issue">
        <h2>🚨 Vấn đề đã phát hiện:</h2>
        <p><strong>Layout Issue:</strong> Các trang conference (như <code>/attendees</code>, <code>/checkin</code>, v.v.) không có header và sidebar.</p>
        <p><strong>Nguyên nhân:</strong> Các trang này render trực tiếp mà không được bọc bởi <code>MainLayout</code>.</p>
        <p><strong>Kết quả:</strong> Giao diện không nhất quán và thiếu navigation.</p>
    </div>
    
    <div class="fix-summary">
        <h2>✅ Các thay đổi đã thực hiện:</h2>
        <ul>
            <li><strong>Thêm MainLayout wrapper:</strong> Bọc tất cả các trang conference với <code>MainLayout</code></li>
            <li><strong>Thêm auth logic:</strong> Kiểm tra authentication và loading states</li>
            <li><strong>Thêm user info:</strong> Truyền user role, name, avatar vào MainLayout</li>
            <li><strong>Sửa container classes:</strong> Loại bỏ <code>container mx-auto p-6</code> vì MainLayout đã có padding</li>
            <li><strong>Thêm error handling:</strong> Hiển thị lỗi với layout đúng cách</li>
        </ul>
    </div>

    <div class="test-section">
        <h2>🧪 Test Cases</h2>
        <p>Click vào các link sau để test xem có header và sidebar không:</p>
        
        <h3>Test 1: Conference Pages đã sửa</h3>
        <a href="/attendees?conferenceId=1" class="test-link" target="_blank">
            📋 /attendees?conferenceId=1 (✅ Đã sửa)
        </a>
        <a href="/checkin?conferenceId=1" class="test-link" target="_blank">
            📱 /checkin?conferenceId=1 (✅ Đã sửa)
        </a>
        <a href="/networking?conferenceId=1" class="test-link" target="_blank">
            🌐 /networking?conferenceId=1 (✅ Đã sửa)
        </a>

        <h3>Test 2: Conference Pages cần kiểm tra</h3>
        <a href="/venue?conferenceId=1" class="test-link" target="_blank">
            📍 /venue?conferenceId=1 (⚠️ Cần kiểm tra)
        </a>
        <a href="/sessions?conferenceId=1" class="test-link" target="_blank">
            🎥 /sessions?conferenceId=1 (⚠️ Cần kiểm tra)
        </a>
        <a href="/badges?conferenceId=1" class="test-link" target="_blank">
            🏆 /badges?conferenceId=1 (⚠️ Cần kiểm tra)
        </a>
        <a href="/analytics?conferenceId=1" class="test-link" target="_blank">
            📊 /analytics?conferenceId=1 (⚠️ Cần kiểm tra)
        </a>
        <a href="/mobile?conferenceId=1" class="test-link" target="_blank">
            📱 /mobile?conferenceId=1 (⚠️ Cần kiểm tra)
        </a>

        <h3>Test 3: So sánh với Dashboard</h3>
        <a href="/dashboard" class="test-link" target="_blank">
            🏠 /dashboard (✅ Có layout đúng)
        </a>
    </div>

    <div class="test-section">
        <h2>📝 Expected Behavior</h2>
        <ul>
            <li class="success">✅ Có header với user info và logout button</li>
            <li class="success">✅ Có sidebar với navigation menu</li>
            <li class="success">✅ Sidebar hiển thị các hội nghị và tính năng</li>
            <li class="success">✅ Layout nhất quán với các trang khác</li>
            <li class="success">✅ Responsive design hoạt động đúng</li>
        </ul>
    </div>

    <div class="test-section">
        <h2>🔍 Debug Information</h2>
        <button onclick="checkCurrentState()">Check Current State</button>
        <div id="debug-info"></div>
    </div>

    <div class="test-section">
        <h2>🔧 Technical Details</h2>
        <p><strong>Vấn đề đã sửa:</strong></p>
        <ul>
            <li>Các trang conference không có layout wrapper</li>
            <li>Thiếu header và sidebar navigation</li>
            <li>Giao diện không nhất quán</li>
        </ul>
        
        <p><strong>Giải pháp:</strong></p>
        <ul>
            <li>Wrap tất cả trang conference với <code>MainLayout</code></li>
            <li>Thêm auth logic và user info</li>
            <li>Sửa container classes để phù hợp với layout</li>
            <li>Thêm error handling với layout đúng</li>
        </ul>
    </div>

    <div class="test-section">
        <h2>📋 Checklist</h2>
        <ul>
            <li class="success">✅ /attendees - Đã sửa</li>
            <li class="success">✅ /checkin - Đã sửa</li>
            <li class="success">✅ /networking - Đã sửa</li>
            <li class="warning">⚠️ /venue - Cần kiểm tra</li>
            <li class="warning">⚠️ /sessions - Cần kiểm tra</li>
            <li class="warning">⚠️ /badges - Cần kiểm tra</li>
            <li class="warning">⚠️ /analytics - Cần kiểm tra</li>
            <li class="warning">⚠️ /mobile - Cần kiểm tra</li>
        </ul>
    </div>

    <script>
        function checkCurrentState() {
            const debugDiv = document.getElementById('debug-info');
            debugDiv.innerHTML = '<p class="info">Checking current state...</p>';

            // Check URL parameters
            const urlParams = new URLSearchParams(window.location.search);
            const conferenceId = urlParams.get('conferenceId');
            
            // Check cookies
            const token = getCookie('accessToken');
            
            let debugInfo = `
                <h3>Current State:</h3>
                <pre>URL: ${window.location.href}
Pathname: ${window.location.pathname}
ConferenceId from URL: ${conferenceId || 'None'}
Access Token: ${token ? 'Found' : 'Not found'}</pre>
                
                <h3>Expected Layout Elements:</h3>
                <ul>
                    <li class="success">✅ Header với user info</li>
                    <li class="success">✅ Sidebar với navigation</li>
                    <li class="success">✅ Main content area</li>
                    <li class="success">✅ Responsive design</li>
                </ul>
            `;

            debugDiv.innerHTML = debugInfo;
        }

        function getCookie(name) {
            const value = `; ${document.cookie}`;
            const parts = value.split(`; ${name}=`);
            if (parts.length === 2) return parts.pop().split(';').shift();
            return null;
        }

        // Auto-check on load
        window.onload = function() {
            checkCurrentState();
        };
    </script>
</body>
</html>

