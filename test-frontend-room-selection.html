<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Test Room Selection in Session Creation</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        max-width: 800px;
        margin: 0 auto;
        padding: 20px;
        background-color: #f5f5f5;
      }
      .container {
        background: white;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }
      .test-section {
        margin: 20px 0;
        padding: 15px;
        border: 1px solid #ddd;
        border-radius: 5px;
      }
      .success {
        background-color: #d4edda;
        border-color: #c3e6cb;
      }
      .error {
        background-color: #f8d7da;
        border-color: #f5c6cb;
      }
      .info {
        background-color: #d1ecf1;
        border-color: #bee5eb;
      }
      button {
        background-color: #007bff;
        color: white;
        border: none;
        padding: 10px 20px;
        border-radius: 4px;
        cursor: pointer;
        margin: 5px;
      }
      button:hover {
        background-color: #0056b3;
      }
      select,
      input {
        padding: 8px;
        margin: 5px;
        border: 1px solid #ddd;
        border-radius: 4px;
      }
      .form-group {
        margin: 10px 0;
      }
      label {
        display: block;
        margin-bottom: 5px;
        font-weight: bold;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>üß™ Test Room Selection in Session Creation</h1>

      <div class="test-section info">
        <h3>M√¥ t·∫£ test</h3>
        <p>Test n√†y ki·ªÉm tra t√≠nh nƒÉng ch·ªçn ph√≤ng trong form t·∫°o phi√™n:</p>
        <ul>
          <li>‚úÖ Dropdown ch·ªçn ph√≤ng hi·ªÉn th·ªã danh s√°ch ph√≤ng c√≥ s·∫µn</li>
          <li>‚úÖ Khi ch·ªçn ph√≤ng, t√™n ph√≤ng v√† s·ª©c ch·ª©a ƒë∆∞·ª£c hi·ªÉn th·ªã</li>
          <li>‚úÖ Khi ch·ªçn h·ªôi ngh·ªã, danh s√°ch ph√≤ng ƒë∆∞·ª£c load l·∫°i</li>
          <li>‚úÖ Form validation ho·∫°t ƒë·ªông ƒë√∫ng</li>
        </ul>
      </div>

      <div class="test-section">
        <h3>Test Form T·∫°o Phi√™n</h3>
        <form id="sessionForm">
          <div class="form-group">
            <label for="title">Ti√™u ƒë·ªÅ phi√™n *</label>
            <input
              type="text"
              id="title"
              placeholder="Nh·∫≠p ti√™u ƒë·ªÅ phi√™n"
              required
            />
          </div>

          <div class="form-group">
            <label for="conference">H·ªôi ngh·ªã *</label>
            <select id="conference" required>
              <option value="">Ch·ªçn h·ªôi ngh·ªã</option>
              <option value="1">H·ªôi ngh·ªã Test 1</option>
              <option value="2">H·ªôi ngh·ªã Test 2</option>
            </select>
          </div>

          <div class="form-group">
            <label for="room">Ph√≤ng</label>
            <select id="room">
              <option value="">Ch·ªçn ph√≤ng</option>
              <!-- Rooms will be loaded dynamically -->
            </select>
          </div>

          <div class="form-group">
            <label for="speaker">Di·ªÖn gi·∫£</label>
            <input type="text" id="speaker" placeholder="T√™n di·ªÖn gi·∫£" />
          </div>

          <div class="form-group">
            <label for="startTime">Th·ªùi gian b·∫Øt ƒë·∫ßu</label>
            <input type="datetime-local" id="startTime" />
          </div>

          <div class="form-group">
            <label for="endTime">Th·ªùi gian k·∫øt th√∫c</label>
            <input type="datetime-local" id="endTime" />
          </div>

          <button type="button" onclick="testFormValidation()">
            Test Validation
          </button>
          <button type="button" onclick="testRoomSelection()">
            Test Room Selection
          </button>
          <button type="button" onclick="resetForm()">Reset Form</button>
        </form>
      </div>

      <div class="test-section">
        <h3>Test Results</h3>
        <div id="testResults"></div>
      </div>
    </div>

    <script>
      // Mock data for testing
      const mockRooms = {
        1: [
          // Conference 1 rooms
          { id: 1, name: "Ph√≤ng A1", capacity: 50 },
          { id: 2, name: "Ph√≤ng A2", capacity: 100 },
          { id: 3, name: "Ph√≤ng A3", capacity: 200 },
        ],
        2: [
          // Conference 2 rooms
          { id: 4, name: "Ph√≤ng B1", capacity: 30 },
          { id: 5, name: "Ph√≤ng B2", capacity: 80 },
          { id: 6, name: "Ph√≤ng B3", capacity: 150 },
        ],
      };

      // Initialize form
      document.addEventListener("DOMContentLoaded", function () {
        const conferenceSelect = document.getElementById("conference");
        const roomSelect = document.getElementById("room");

        // Load rooms when conference changes
        conferenceSelect.addEventListener("change", function () {
          loadRoomsForConference(this.value);
        });

        // Show room details when room is selected
        roomSelect.addEventListener("change", function () {
          const selectedOption = this.options[this.selectedIndex];
          if (selectedOption.value) {
            const roomInfo = selectedOption.text;
            addTestResult(`‚úÖ Ph√≤ng ƒë√£ ch·ªçn: ${roomInfo}`, "success");
          }
        });
      });

      function loadRoomsForConference(conferenceId) {
        const roomSelect = document.getElementById("room");

        // Clear existing options
        roomSelect.innerHTML = '<option value="">Ch·ªçn ph√≤ng</option>';

        if (conferenceId && mockRooms[conferenceId]) {
          const rooms = mockRooms[conferenceId];
          rooms.forEach((room) => {
            const option = document.createElement("option");
            option.value = room.id;
            option.textContent = `${room.name} (${room.capacity} ch·ªó)`;
            roomSelect.appendChild(option);
          });
          addTestResult(
            `‚úÖ ƒê√£ load ${rooms.length} ph√≤ng cho h·ªôi ngh·ªã ${conferenceId}`,
            "success"
          );
        } else {
          addTestResult("‚ö†Ô∏è Kh√¥ng c√≥ ph√≤ng n√†o cho h·ªôi ngh·ªã n√†y", "info");
        }
      }

      function testFormValidation() {
        const title = document.getElementById("title").value;
        const conference = document.getElementById("conference").value;

        if (!title.trim()) {
          addTestResult(
            "‚ùå Validation failed: Ti√™u ƒë·ªÅ phi√™n l√† b·∫Øt bu·ªôc",
            "error"
          );
          return;
        }

        if (!conference) {
          addTestResult(
            "‚ùå Validation failed: Vui l√≤ng ch·ªçn h·ªôi ngh·ªã",
            "error"
          );
          return;
        }

        addTestResult("‚úÖ Form validation passed", "success");
      }

      function testRoomSelection() {
        const conference = document.getElementById("conference").value;
        const room = document.getElementById("room").value;

        if (!conference) {
          addTestResult("‚ùå Vui l√≤ng ch·ªçn h·ªôi ngh·ªã tr∆∞·ªõc", "error");
          return;
        }

        if (!room) {
          addTestResult("‚ùå Vui l√≤ng ch·ªçn ph√≤ng", "error");
          return;
        }

        const selectedOption =
          document.getElementById("room").options[
            document.getElementById("room").selectedIndex
          ];
        addTestResult(
          `‚úÖ Room selection test passed: ${selectedOption.textContent}`,
          "success"
        );
      }

      function resetForm() {
        document.getElementById("sessionForm").reset();
        document.getElementById("room").innerHTML =
          '<option value="">Ch·ªçn ph√≤ng</option>';
        document.getElementById("testResults").innerHTML = "";
        addTestResult("üîÑ Form ƒë√£ ƒë∆∞·ª£c reset", "info");
      }

      function addTestResult(message, type) {
        const resultsDiv = document.getElementById("testResults");
        const resultDiv = document.createElement("div");
        resultDiv.className = `test-section ${type}`;
        resultDiv.innerHTML = `<p>${message}</p>`;
        resultsDiv.appendChild(resultDiv);
      }

      // Auto-test on load
      window.addEventListener("load", function () {
        addTestResult("üöÄ Test page loaded successfully", "success");
        addTestResult(
          "üìù H∆∞·ªõng d·∫´n: Ch·ªçn h·ªôi ngh·ªã ƒë·ªÉ load ph√≤ng, sau ƒë√≥ ch·ªçn ph√≤ng ƒë·ªÉ test",
          "info"
        );
      });
    </script>
  </body>
</html>
