-- Seed data for Oracle CMS schema
-- Assumes tables from the provided DDL already exist

-- Clean existing data (children first)
DELETE FROM AUDIT_LOGS;
DELETE FROM CHECKINS;
DELETE FROM MESSAGES;
DELETE FROM MATCHES;
DELETE FROM REGISTRATIONS;
DELETE FROM USER_ROLES;
DELETE FROM ROLE_PERMISSIONS;
DELETE FROM SESSIONS;
DELETE FROM ROOMS;
DELETE FROM FLOORS;
DELETE FROM CONFERENCES;
DELETE FROM ATTENDEES;
DELETE FROM APP_USERS;
DELETE FROM ROLES;
DELETE FROM PERMISSIONS;

-- ROLES
INSERT INTO ROLES (ID, CODE, NAME) VALUES (1, 'admin', 'Quản trị viên');
INSERT INTO ROLES (ID, CODE, NAME) VALUES (2, 'staff', 'Nhân viên');
INSERT INTO ROLES (ID, CODE, NAME) VALUES (3, 'attendee', 'Người tham dự');

-- PERMISSIONS
INSERT INTO PERMISSIONS (ID, CODE, NAME, CATEGORY, DESCRIPTION) VALUES (1, 'dashboard_view', 'Xem dashboard', 'Dashboard', 'Truy cập trang tổng quan');
INSERT INTO PERMISSIONS (ID, CODE, NAME, CATEGORY, DESCRIPTION) VALUES (2, 'conference_create', 'Tạo hội nghị', 'Hội nghị', 'Tạo hội nghị mới');
INSERT INTO PERMISSIONS (ID, CODE, NAME, CATEGORY, DESCRIPTION) VALUES (3, 'conference_edit', 'Sửa hội nghị', 'Hội nghị', 'Chỉnh sửa thông tin hội nghị');
INSERT INTO PERMISSIONS (ID, CODE, NAME, CATEGORY, DESCRIPTION) VALUES (4, 'conference_delete', 'Xóa hội nghị', 'Hội nghị', 'Xóa hội nghị');
INSERT INTO PERMISSIONS (ID, CODE, NAME, CATEGORY, DESCRIPTION) VALUES (5, 'attendee_view', 'Xem người tham dự', 'Người tham dự', 'Xem danh sách người tham dự');
INSERT INTO PERMISSIONS (ID, CODE, NAME, CATEGORY, DESCRIPTION) VALUES (6, 'attendee_edit', 'Sửa người tham dự', 'Người tham dự', 'Chỉnh sửa thông tin người tham dự');
INSERT INTO PERMISSIONS (ID, CODE, NAME, CATEGORY, DESCRIPTION) VALUES (7, 'checkin_perform', 'Thực hiện check-in', 'Check-in', 'Check-in người tham dự');
INSERT INTO PERMISSIONS (ID, CODE, NAME, CATEGORY, DESCRIPTION) VALUES (8, 'role_manage', 'Quản lý vai trò', 'Hệ thống', 'Phân quyền người dùng');
INSERT INTO PERMISSIONS (ID, CODE, NAME, CATEGORY, DESCRIPTION) VALUES (9, 'settings_manage', 'Quản lý cài đặt', 'Hệ thống', 'Cấu hình hệ thống');
INSERT INTO PERMISSIONS (ID, CODE, NAME, CATEGORY, DESCRIPTION) VALUES (10, 'audit_view', 'Xem nhật ký', 'Hệ thống', 'Xem nhật ký hoạt động');
INSERT INTO PERMISSIONS (ID, CODE, NAME, CATEGORY, DESCRIPTION) VALUES (11, 'roles.admin', 'Quyền quản trị', 'Hệ thống', 'Quyền quản trị viên toàn hệ thống');
-- Permissions used in code
INSERT INTO PERMISSIONS (ID, CODE, NAME, CATEGORY, DESCRIPTION) VALUES (12, 'conferences.read', 'Đọc hội nghị', 'Hội nghị', 'Xem thông tin hội nghị');
INSERT INTO PERMISSIONS (ID, CODE, NAME, CATEGORY, DESCRIPTION) VALUES (13, 'conferences.write', 'Ghi hội nghị', 'Hội nghị', 'Tạo/sửa/xóa hội nghị');
INSERT INTO PERMISSIONS (ID, CODE, NAME, CATEGORY, DESCRIPTION) VALUES (14, 'attendees.read', 'Đọc người tham dự', 'Người tham dự', 'Xem thông tin người tham dự');
INSERT INTO PERMISSIONS (ID, CODE, NAME, CATEGORY, DESCRIPTION) VALUES (15, 'attendees.write', 'Ghi người tham dự', 'Người tham dự', 'Tạo/sửa/xóa người tham dự');
INSERT INTO PERMISSIONS (ID, CODE, NAME, CATEGORY, DESCRIPTION) VALUES (16, 'checkin.process', 'Xử lý check-in', 'Check-in', 'Thực hiện check-in');
INSERT INTO PERMISSIONS (ID, CODE, NAME, CATEGORY, DESCRIPTION) VALUES (17, 'sessions.write', 'Ghi phiên họp', 'Phiên họp', 'Tạo/sửa/xóa phiên họp');
INSERT INTO PERMISSIONS (ID, CODE, NAME, CATEGORY, DESCRIPTION) VALUES (18, 'registrations.read', 'Đọc đăng ký', 'Đăng ký', 'Xem thông tin đăng ký');
INSERT INTO PERMISSIONS (ID, CODE, NAME, CATEGORY, DESCRIPTION) VALUES (19, 'registrations.write', 'Ghi đăng ký', 'Đăng ký', 'Tạo/sửa/xóa đăng ký');
INSERT INTO PERMISSIONS (ID, CODE, NAME, CATEGORY, DESCRIPTION) VALUES (20, 'analytics.read', 'Đọc phân tích', 'Phân tích', 'Xem báo cáo và thống kê');
INSERT INTO PERMISSIONS (ID, CODE, NAME, CATEGORY, DESCRIPTION) VALUES (21, 'audit.read', 'Đọc nhật ký', 'Nhật ký', 'Xem nhật ký hệ thống');

-- ROLE_PERMISSIONS
-- admin: all permissions including roles.admin
INSERT INTO ROLE_PERMISSIONS (ROLE_ID, PERMISSION_ID) SELECT 1, ID FROM PERMISSIONS;
-- staff: dashboard_view, attendees.read, attendees.write, checkin.process, conferences.read
INSERT INTO ROLE_PERMISSIONS (ROLE_ID, PERMISSION_ID) VALUES (2, 1);  -- dashboard_view
INSERT INTO ROLE_PERMISSIONS (ROLE_ID, PERMISSION_ID) VALUES (2, 12); -- conferences.read
INSERT INTO ROLE_PERMISSIONS (ROLE_ID, PERMISSION_ID) VALUES (2, 14); -- attendees.read
INSERT INTO ROLE_PERMISSIONS (ROLE_ID, PERMISSION_ID) VALUES (2, 15); -- attendees.write
INSERT INTO ROLE_PERMISSIONS (ROLE_ID, PERMISSION_ID) VALUES (2, 16); -- checkin.process
-- attendee: dashboard_view, conferences.read, registrations.read
INSERT INTO ROLE_PERMISSIONS (ROLE_ID, PERMISSION_ID) VALUES (3, 1);  -- dashboard_view
INSERT INTO ROLE_PERMISSIONS (ROLE_ID, PERMISSION_ID) VALUES (3, 12); -- conferences.read
INSERT INTO ROLE_PERMISSIONS (ROLE_ID, PERMISSION_ID) VALUES (3, 18); -- registrations.read

-- APP_USERS
INSERT INTO APP_USERS (ID, EMAIL, NAME, PASSWORD_HASH, STATUS, CREATED_AT, LAST_LOGIN, AVATAR_URL)
VALUES (1, 'admin@conference.vn', 'Nguyễn Văn Admin', 'hash_admin123', 'active', SYSTIMESTAMP, SYSTIMESTAMP, 'https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=150&h=150&fit=crop&crop=face');
INSERT INTO APP_USERS (ID, EMAIL, NAME, PASSWORD_HASH, STATUS, CREATED_AT, LAST_LOGIN, AVATAR_URL)
VALUES (2, 'staff@conference.vn', 'Trần Thị Staff', 'hash_staff123', 'active', SYSTIMESTAMP, SYSTIMESTAMP, 'https://images.unsplash.com/photo-1494790108755-2616b612b786?w=150&h=150&fit=crop&crop=face');
INSERT INTO APP_USERS (ID, EMAIL, NAME, PASSWORD_HASH, STATUS, CREATED_AT, LAST_LOGIN, AVATAR_URL)
VALUES (3, 'user@conference.vn', 'Lê Văn User', 'hash_user123', 'active', SYSTIMESTAMP, NULL, NULL);

-- USER_ROLES
INSERT INTO USER_ROLES (USER_ID, ROLE_ID, ASSIGNED_AT) VALUES (1, 1, SYSTIMESTAMP);
INSERT INTO USER_ROLES (USER_ID, ROLE_ID, ASSIGNED_AT) VALUES (2, 2, SYSTIMESTAMP);
INSERT INTO USER_ROLES (USER_ID, ROLE_ID, ASSIGNED_AT) VALUES (3, 3, SYSTIMESTAMP);

-- CONFERENCES
INSERT INTO CONFERENCES (ID, NAME, DESCRIPTION, START_DATE, END_DATE, LOCATION, CATEGORY, ORGANIZER, CAPACITY, STATUS, CREATED_AT)
VALUES (1, 'Hội nghị Công nghệ 2024', 'Sự kiện công nghệ lớn nhất năm', DATE '2024-12-20', DATE '2024-12-21', 'Trung tâm Hội nghị Quốc gia', 'Technology', 'Tech Corp', 1000, 'active', SYSTIMESTAMP);
INSERT INTO CONFERENCES (ID, NAME, DESCRIPTION, START_DATE, END_DATE, LOCATION, CATEGORY, ORGANIZER, CAPACITY, STATUS, CREATED_AT)
VALUES (2, 'Workshop AI & Machine Learning', 'Chuỗi workshop AI', DATE '2025-01-10', DATE '2025-01-10', 'Innovation Hub', 'Workshop', 'AI Academy', 200, 'published', SYSTIMESTAMP);
INSERT INTO CONFERENCES (ID, NAME, DESCRIPTION, START_DATE, END_DATE, LOCATION, CATEGORY, ORGANIZER, CAPACITY, STATUS, CREATED_AT)
VALUES (3, 'Seminar Khởi nghiệp', 'Seminar chia sẻ khởi nghiệp', DATE '2025-02-05', DATE '2025-02-05', 'Startup Hub', 'Seminar', 'Startup Assoc', 300, 'draft', SYSTIMESTAMP);

-- FLOORS
INSERT INTO FLOORS (ID, CONFERENCE_ID, FLOOR_NUMBER) VALUES (1, 1, 1);
INSERT INTO FLOORS (ID, CONFERENCE_ID, FLOOR_NUMBER) VALUES (2, 1, 2);
INSERT INTO FLOORS (ID, CONFERENCE_ID, FLOOR_NUMBER) VALUES (3, 2, 1);
INSERT INTO FLOORS (ID, CONFERENCE_ID, FLOOR_NUMBER) VALUES (4, 3, 1);

-- ROOMS
INSERT INTO ROOMS (ID, FLOOR_ID, NAME, CAPACITY) VALUES (1, 1, 'Hội trường chính', 800);
INSERT INTO ROOMS (ID, FLOOR_ID, NAME, CAPACITY) VALUES (2, 1, 'Phòng Workshop A', 120);
INSERT INTO ROOMS (ID, FLOOR_ID, NAME, CAPACITY) VALUES (3, 2, 'Phòng hội nghị B1', 200);
INSERT INTO ROOMS (ID, FLOOR_ID, NAME, CAPACITY) VALUES (4, 3, 'Phòng AI 101', 100);
INSERT INTO ROOMS (ID, FLOOR_ID, NAME, CAPACITY) VALUES (5, 4, 'Phòng Startup', 150);

-- SESSIONS
INSERT INTO SESSIONS (ID, CONFERENCE_ID, ROOM_ID, TITLE, SPEAKER, START_TIME, END_TIME, STATUS, DESCRIPTION)
VALUES (1, 1, 1, 'Keynote: Tương lai của AI', 'TS. Nguyễn Văn An', TIMESTAMP '2024-12-20 09:00:00', TIMESTAMP '2024-12-20 10:30:00', 'live', 'Khám phá xu hướng AI');
INSERT INTO SESSIONS (ID, CONFERENCE_ID, ROOM_ID, TITLE, SPEAKER, START_TIME, END_TIME, STATUS, DESCRIPTION)
VALUES (2, 1, 2, 'Workshop: React Hooks', 'Trần Thị Bình', TIMESTAMP '2024-12-20 11:00:00', TIMESTAMP '2024-12-20 12:30:00', 'upcoming', 'Hands-on React');
INSERT INTO SESSIONS (ID, CONFERENCE_ID, ROOM_ID, TITLE, SPEAKER, START_TIME, END_TIME, STATUS, DESCRIPTION)
VALUES (3, 1, 3, 'Blockchain và Fintech', 'Lê Minh Cường', TIMESTAMP '2024-12-20 10:00:00', TIMESTAMP '2024-12-20 11:30:00', 'live', 'Ứng dụng blockchain');
INSERT INTO SESSIONS (ID, CONFERENCE_ID, ROOM_ID, TITLE, SPEAKER, START_TIME, END_TIME, STATUS, DESCRIPTION)
VALUES (4, 2, 4, 'ML cơ bản', 'AI Academy', TIMESTAMP '2025-01-10 09:00:00', TIMESTAMP '2025-01-10 10:30:00', 'upcoming', 'Giới thiệu ML');
INSERT INTO SESSIONS (ID, CONFERENCE_ID, ROOM_ID, TITLE, SPEAKER, START_TIME, END_TIME, STATUS, DESCRIPTION)
VALUES (5, 3, 5, 'Hành trình khởi nghiệp', 'Startup Mentor', TIMESTAMP '2025-02-05 09:00:00', TIMESTAMP '2025-02-05 10:30:00', 'upcoming', 'Chia sẻ kinh nghiệm');

-- ATTENDEES
INSERT INTO ATTENDEES (ID, NAME, EMAIL, PHONE, COMPANY, POSITION, AVATAR_URL, DIETARY, SPECIAL_NEEDS, DATE_OF_BIRTH, GENDER, CREATED_AT)
VALUES (1, 'Nguyễn Văn An', 'nguyen.van.an@email.com', '0901234567', 'Tech Corp', 'Kỹ sư phần mềm', NULL, 'None', NULL, DATE '1990-05-10', 'male', SYSTIMESTAMP);
INSERT INTO ATTENDEES (ID, NAME, EMAIL, PHONE, COMPANY, POSITION, AVATAR_URL, DIETARY, SPECIAL_NEEDS, DATE_OF_BIRTH, GENDER, CREATED_AT)
VALUES (2, 'Trần Thị Bình', 'tran.thi.binh@email.com', '0912345678', 'AI Academy', 'Giảng viên', NULL, 'Vegetarian', NULL, DATE '1992-08-20', 'female', SYSTIMESTAMP);
INSERT INTO ATTENDEES (ID, NAME, EMAIL, PHONE, COMPANY, POSITION, AVATAR_URL, DIETARY, SPECIAL_NEEDS, DATE_OF_BIRTH, GENDER, CREATED_AT)
VALUES (3, 'Lê Văn Cường', 'le.van.cuong@email.com', '0923456789', 'Startup Hub', 'CEO', NULL, 'None', NULL, DATE '1988-03-15', 'male', SYSTIMESTAMP);

-- REGISTRATIONS (unique per attendee+conference)
INSERT INTO REGISTRATIONS (ID, ATTENDEE_ID, CONFERENCE_ID, REGISTRATION_DATE, STATUS, QR_CODE)
VALUES (1, 1, 1, SYSTIMESTAMP, 'registered', 'QR001234567');
INSERT INTO REGISTRATIONS (ID, ATTENDEE_ID, CONFERENCE_ID, REGISTRATION_DATE, STATUS, QR_CODE)
VALUES (2, 2, 2, SYSTIMESTAMP, 'registered', 'QR001234568');
INSERT INTO REGISTRATIONS (ID, ATTENDEE_ID, CONFERENCE_ID, REGISTRATION_DATE, STATUS, QR_CODE)
VALUES (3, 3, 3, SYSTIMESTAMP, 'checked-in', 'QR001234569');

-- CHECKINS (multiple per registration to capture attempts)
INSERT INTO CHECKINS (ID, REGISTRATION_ID, CHECKIN_TIME, METHOD, STATUS)
VALUES (1, 3, SYSTIMESTAMP - INTERVAL '1' HOUR, 'qr', 'success');
INSERT INTO CHECKINS (ID, REGISTRATION_ID, CHECKIN_TIME, METHOD, STATUS)
VALUES (2, 3, SYSTIMESTAMP - INTERVAL '30' MINUTE, 'qr', 'duplicate');

-- MESSAGES (Q&A/Chat)
INSERT INTO MESSAGES (ID, SESSION_ID, ATTENDEE_ID, TS, TYPE, CONTENT)
VALUES (1, 1, 1, SYSTIMESTAMP - INTERVAL '10' MINUTE, 'text', 'Xin chào, diễn giả có thể chia sẻ tài liệu?');
INSERT INTO MESSAGES (ID, SESSION_ID, ATTENDEE_ID, TS, TYPE, CONTENT)
VALUES (2, 1, 2, SYSTIMESTAMP - INTERVAL '8' MINUTE, 'text', 'Cho hỏi mô hình demo dùng framework nào?');

-- MATCHES (pairing attendees; dedup enforced by function-based unique index)
INSERT INTO MATCHES (ID, ATTENDEE_A_ID, ATTENDEE_B_ID, SCORE, CREATED_AT)
VALUES (1, 1, 2, 95, SYSTIMESTAMP);
INSERT INTO MATCHES (ID, ATTENDEE_A_ID, ATTENDEE_B_ID, SCORE, CREATED_AT)
VALUES (2, 2, 3, 82, SYSTIMESTAMP);

-- AUDIT_LOGS
INSERT INTO AUDIT_LOGS (ID, TS, USER_ID, ACTION, RESOURCE, DETAILS, IP_ADDRESS, USER_AGENT, STATUS, CATEGORY)
VALUES (1, SYSTIMESTAMP - INTERVAL '2' HOUR, 1, 'Tạo hội nghị mới', 'conferences', 'Tạo hội nghị "Workshop AI 2025"', '192.168.1.100', 'Chrome 120.0.0.0', 'success', 'conference');
INSERT INTO AUDIT_LOGS (ID, TS, USER_ID, ACTION, RESOURCE, DETAILS, IP_ADDRESS, USER_AGENT, STATUS, CATEGORY)
VALUES (2, SYSTIMESTAMP - INTERVAL '90' MINUTE, 2, 'Check-in người tham dự', 'attendees', 'Check-in cho Lê Văn Cường', '192.168.1.101', 'Chrome 120.0.0.0', 'success', 'data');
INSERT INTO AUDIT_LOGS (ID, TS, USER_ID, ACTION, RESOURCE, DETAILS, IP_ADDRESS, USER_AGENT, STATUS, CATEGORY)
VALUES (3, SYSTIMESTAMP - INTERVAL '30' MINUTE, NULL, 'Đăng nhập thất bại', 'auth', 'Sai mật khẩu email: user@test.com', '203.162.4.191', 'Chrome 119.0.0.0', 'failed', 'auth');

COMMIT;


