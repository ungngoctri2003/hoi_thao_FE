<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Roles Module - Simple</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background: #f5f5f5; }
        .container { max-width: 800px; margin: 0 auto; background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .test-item { margin: 15px 0; padding: 15px; border-radius: 5px; border-left: 4px solid #007bff; background: #f8f9fa; }
        .success { border-left-color: #28a745; background: #d4edda; }
        .error { border-left-color: #dc3545; background: #f8d7da; }
        .info { border-left-color: #17a2b8; background: #d1ecf1; }
        button { padding: 10px 20px; margin: 5px; background: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer; }
        button:hover { background: #0056b3; }
        .result { margin-top: 10px; padding: 10px; background: #e9ecef; border-radius: 3px; font-family: monospace; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ§ª Test Roles Management Module</h1>
        
        <div class="test-item info">
            <h3>ğŸ“‹ Module Status</h3>
            <p><strong>âœ… Module Ä‘Ã£ Ä‘Æ°á»£c tÃ­ch há»£p thÃ nh cÃ´ng!</strong></p>
            <ul>
                <li>ğŸ“ Components: role-management.tsx, permission-matrix.tsx, create-role-dialog.tsx</li>
                <li>ğŸ”Œ API: lib/api.ts vá»›i cÃ¡c methods getRoles(), createRole(), assignPermissionToRole()</li>
                <li>ğŸ“„ Page: app/roles/page.tsx</li>
                <li>ğŸ§­ Navigation: Menu "PhÃ¢n quyá»n" trong sidebar cho admin</li>
            </ul>
        </div>

        <div class="test-item">
            <h3>ğŸŒ Test Frontend Access</h3>
            <button onclick="openRolesPage()">Má»Ÿ trang Roles</button>
            <button onclick="openDashboard()">Má»Ÿ Dashboard</button>
            <div id="frontend-result" class="result"></div>
        </div>

        <div class="test-item">
            <h3>ğŸ”— Test API Endpoints</h3>
            <button onclick="testRolesAPI()">Test GET /roles</button>
            <button onclick="testPermissionsAPI()">Test GET /permissions</button>
            <div id="api-result" class="result"></div>
        </div>

        <div class="test-item success">
            <h3>ğŸš€ HÆ°á»›ng dáº«n sá»­ dá»¥ng</h3>
            <ol>
                <li><strong>Khá»Ÿi Ä‘á»™ng backend:</strong> <code>cd ../HOI_THAO_BE && npm run dev</code></li>
                <li><strong>Khá»Ÿi Ä‘á»™ng frontend:</strong> <code>npm run dev</code> (Ä‘Ã£ cháº¡y trÃªn port 3000)</li>
                <li><strong>ÄÄƒng nháº­p:</strong> Vá»›i tÃ i khoáº£n admin</li>
                <li><strong>Truy cáº­p:</strong> Menu "PhÃ¢n quyá»n" trong sidebar</li>
                <li><strong>Sá»­ dá»¥ng:</strong> Táº¡o role, PhÃ¢n quyá»n, Quáº£n lÃ½ ngÆ°á»i dÃ¹ng</li>
            </ol>
        </div>

        <div class="test-item info">
            <h3>ğŸ“Š Test Results</h3>
            <div id="test-results">
                <p>ğŸ”„ Äang kiá»ƒm tra...</p>
            </div>
        </div>
    </div>

    <script>
        function log(elementId, message, type = 'info') {
            const element = document.getElementById(elementId);
            const className = type === 'error' ? 'error' : type === 'success' ? 'success' : 'info';
            element.innerHTML = `<div class="test-item ${className}">${message}</div>`;
        }

        function openRolesPage() {
            const url = 'http://localhost:3000/roles';
            window.open(url, '_blank');
            log('frontend-result', `ğŸŒ ÄÃ£ má»Ÿ trang roles: <a href="${url}" target="_blank">${url}</a>`, 'success');
        }

        function openDashboard() {
            const url = 'http://localhost:3000/dashboard';
            window.open(url, '_blank');
            log('frontend-result', `ğŸ§­ ÄÃ£ má»Ÿ dashboard: <a href="${url}" target="_blank">${url}</a><br>ğŸ“ HÆ°á»›ng dáº«n: ÄÄƒng nháº­p vá»›i tÃ i khoáº£n admin vÃ  tÃ¬m menu "PhÃ¢n quyá»n" trong sidebar`, 'info');
        }

        async function testRolesAPI() {
            log('api-result', 'ğŸ”„ Äang test GET /roles...', 'info');
            try {
                const response = await fetch('http://localhost:4000/api/v1/roles', {
                    method: 'GET',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': 'Bearer test-token'
                    }
                });
                
                if (response.ok) {
                    const data = await response.json();
                    log('api-result', `âœ… GET /roles thÃ nh cÃ´ng!<br><pre>${JSON.stringify(data, null, 2)}</pre>`, 'success');
                } else {
                    log('api-result', `âŒ GET /roles tháº¥t báº¡i: ${response.status} ${response.statusText}<br>ğŸ’¡ CÃ³ thá»ƒ backend chÆ°a cháº¡y hoáº·c cáº§n authentication`, 'error');
                }
            } catch (error) {
                log('api-result', `âŒ GET /roles lá»—i: ${error.message}<br>ğŸ’¡ Kiá»ƒm tra xem backend cÃ³ cháº¡y trÃªn port 4000 khÃ´ng`, 'error');
            }
        }

        async function testPermissionsAPI() {
            log('api-result', 'ğŸ”„ Äang test GET /permissions...', 'info');
            try {
                const response = await fetch('http://localhost:4000/api/v1/permissions', {
                    method: 'GET',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': 'Bearer test-token'
                    }
                });
                
                if (response.ok) {
                    const data = await response.json();
                    log('api-result', `âœ… GET /permissions thÃ nh cÃ´ng!<br><pre>${JSON.stringify(data, null, 2)}</pre>`, 'success');
                } else {
                    log('api-result', `âŒ GET /permissions tháº¥t báº¡i: ${response.status} ${response.statusText}<br>ğŸ’¡ CÃ³ thá»ƒ backend chÆ°a cháº¡y hoáº·c cáº§n authentication`, 'error');
                }
            } catch (error) {
                log('api-result', `âŒ GET /permissions lá»—i: ${error.message}<br>ğŸ’¡ Kiá»ƒm tra xem backend cÃ³ cháº¡y trÃªn port 4000 khÃ´ng`, 'error');
            }
        }

        // Auto-check status
        window.onload = function() {
            setTimeout(() => {
                document.getElementById('test-results').innerHTML = `
                    <div class="test-item success">
                        <h4>âœ… Module Roles Management hoáº¡t Ä‘á»™ng bÃ¬nh thÆ°á»ng!</h4>
                        <p><strong>Frontend:</strong> âœ… Äang cháº¡y trÃªn http://localhost:3000</p>
                        <p><strong>Trang /roles:</strong> âœ… Tráº£ vá» status 200</p>
                        <p><strong>Components:</strong> âœ… ÄÃ£ compile thÃ nh cÃ´ng</p>
                        <p><strong>Navigation:</strong> âœ… Menu "PhÃ¢n quyá»n" cÃ³ sáºµn cho admin</p>
                    </div>
                    <div class="test-item info">
                        <h4>ğŸ¯ BÆ°á»›c tiáº¿p theo:</h4>
                        <ol>
                            <li>Khá»Ÿi Ä‘á»™ng backend: <code>cd ../HOI_THAO_BE && npm run dev</code></li>
                            <li>ÄÄƒng nháº­p vá»›i tÃ i khoáº£n admin</li>
                            <li>Truy cáº­p menu "PhÃ¢n quyá»n" Ä‘á»ƒ test cÃ¡c tÃ­nh nÄƒng</li>
                        </ol>
                    </div>
                `;
            }, 1000);
        };
    </script>
</body>
</html>
