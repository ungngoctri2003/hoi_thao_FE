<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Conference Display</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .result { background: #f5f5f5; padding: 10px; margin: 10px 0; border-radius: 4px; }
        .error { background: #ffebee; color: #c62828; }
        .success { background: #e8f5e8; color: #2e7d32; }
        button { padding: 10px 20px; margin: 5px; cursor: pointer; }
        .conference-item { 
            background: #e3f2fd; 
            padding: 10px; 
            margin: 5px 0; 
            border-radius: 4px; 
            border-left: 4px solid #2196f3;
        }
    </style>
</head>
<body>
    <h1>Test Conference Display</h1>
    
    <div>
        <button onclick="testConferenceData()">Test Conference Data</button>
        <button onclick="simulateAuth()">Simulate Auth</button>
        <button onclick="clearResults()">Clear Results</button>
    </div>
    
    <div id="results"></div>

    <script>
        function log(message, type = 'info') {
            const results = document.getElementById('results');
            const div = document.createElement('div');
            div.className = `result ${type}`;
            div.innerHTML = `<strong>${new Date().toLocaleTimeString()}</strong>: ${message}`;
            results.appendChild(div);
        }
        
        function clearResults() {
            document.getElementById('results').innerHTML = '';
        }
        
        function simulateAuth() {
            // Simulate authentication
            const mockUser = {
                id: 1,
                email: 'admin@example.com',
                name: 'Admin User',
                role: 'admin'
            };
            
            localStorage.setItem('accessToken', 'mock-token-123');
            localStorage.setItem('user', JSON.stringify(mockUser));
            
            log('Simulated authentication with admin user', 'success');
        }
        
        function testConferenceData() {
            try {
                log('Testing conference data simulation...');
                
                // Simulate the conference permissions data
                const mockConferencePermissions = [
                    {
                        conferenceId: 1,
                        conferenceName: 'Hội nghị Công nghệ 2024',
                        permissions: {
                            'conferences.view': true,
                            'conferences.create': true,
                            'conferences.update': true,
                            'conferences.delete': true,
                            'attendees.view': true,
                            'attendees.manage': true,
                            'checkin.manage': true,
                            'networking.view': true,
                            'venue.view': true,
                            'sessions.view': true,
                            'badges.view': true,
                            'analytics.view': true,
                            'my-events.view': true,
                            'roles.manage': true,
                            'mobile.view': true,
                        },
                        isActive: true
                    },
                    {
                        conferenceId: 2,
                        conferenceName: 'Hội nghị AI & Machine Learning',
                        permissions: {
                            'conferences.view': true,
                            'conferences.create': true,
                            'conferences.update': true,
                            'attendees.view': true,
                            'attendees.manage': true,
                            'checkin.manage': true,
                            'networking.view': true,
                            'venue.view': true,
                            'sessions.view': true,
                            'badges.view': true,
                            'analytics.view': true,
                            'my-events.view': true,
                            'roles.manage': true,
                            'mobile.view': true,
                        },
                        isActive: true
                    }
                ];
                
                log(`Found ${mockConferencePermissions.length} conferences:`, 'success');
                
                mockConferencePermissions.forEach((conference, index) => {
                    const activePermissions = Object.entries(conference.permissions)
                        .filter(([_, isActive]) => isActive)
                        .map(([permissionCode, _]) => permissionCode);
                    
                    const conferenceDiv = document.createElement('div');
                    conferenceDiv.className = 'conference-item';
                    conferenceDiv.innerHTML = `
                        <h3>${conference.conferenceName}</h3>
                        <p><strong>ID:</strong> ${conference.conferenceId}</p>
                        <p><strong>Active:</strong> ${conference.isActive ? 'Yes' : 'No'}</p>
                        <p><strong>Permissions:</strong> ${activePermissions.length}</p>
                        <p><strong>Permission List:</strong> ${activePermissions.join(', ')}</p>
                    `;
                    document.getElementById('results').appendChild(conferenceDiv);
                });
                
                // Test the logic that would be used in ConferenceSelectorCompact
                const availableConferences = mockConferencePermissions.filter(cp => cp.isActive);
                const currentConferenceId = availableConferences.length > 0 ? availableConferences[0].conferenceId : null;
                const currentConferenceName = currentConferenceId ? 
                    availableConferences.find(c => c.conferenceId === currentConferenceId)?.conferenceName : 
                    "Chọn hội nghị";
                
                log(`Available conferences: ${availableConferences.length}`, 'success');
                log(`Current conference ID: ${currentConferenceId}`, 'success');
                log(`Current conference name: ${currentConferenceName}`, 'success');
                
                // Test the display logic
                if (availableConferences.length === 0) {
                    log('No conferences available - component would return null', 'error');
                } else if (availableConferences.length === 1) {
                    log('Single conference - would show conference name only', 'success');
                } else {
                    log('Multiple conferences - would show dropdown/selector', 'success');
                }
                
            } catch (error) {
                log(`Error: ${error.message}`, 'error');
            }
        }
        
        // Auto-run on load
        window.onload = function() {
            log('Page loaded. Click buttons to test conference data.');
        };
    </script>
</body>
</html>


